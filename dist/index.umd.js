(function(A,k){typeof exports=="object"&&typeof module<"u"?k(exports,require("vue"),require("axios")):typeof define=="function"&&define.amd?define(["exports","vue","axios"],k):(A=typeof globalThis<"u"?globalThis:A||self,k(A.FanUse={},A.Vue,A.axios))})(this,function(A,k,z){"use strict";const j={line:"line",middle:"middle",random:"random"},P={static:"static",slowly:"slowly",playing:"playing"},Y={n:8,radii:0,initialPosition:j.middle,defaultStatus:P.static,duration:3e3,roundDurationSlowly:5e4},B=p=>{let y,S;const b=k.reactive({itemList:[],itemMaxWidth:0,lineList:[],status:P.static,panStyle:"",panStyleSlowly:""}),d=()=>{b.status!==P.playing&&(y.defaultStatus===P.slowly?b.panStyleSlowly=`animation:fanZhuanpanSlowly ${y.roundDurationSlowly}ms linear infinite`:b.panStyleSlowly="")},u=s=>{if(b.status===P.playing)throw new Error("抽奖转动过程中不允许修改配置项");y={...y,...s},y.defaultStatus!==P.static&&y.defaultStatus!==P.slowly&&(y.defaultStatus=P.static),b.status=y.defaultStatus,t(),d()},o=s=>{const C=s/180*Math.PI;return 2*y.radii*Math.sin(C/2)},t=()=>{S=360/y.n;const s=new Array(y.n).fill(0),C=[];b.itemList=s.map((x,_)=>{const T={offsetDeg:y.initialPosition===j.line?S*_+S/2:S*_};return C.push({offsetDeg:T.offsetDeg+S/2}),T}),b.lineList=C,b.itemMaxWidth=o(S)};(()=>{u({...Y,...p})})();let e=!0;const a=()=>{b.panStyle="",d(),e=!0};let f,g;const m=()=>{b.status=y.defaultStatus},r=s=>new Promise((C,x)=>{if(b.status===P.playing)return x(new Error("请等待上一条完成之后再试"));if(!e){a(),setTimeout(()=>{C(r(s))},300);return}e=!1,b.status=P.playing;let _=360*(y.duration*10/Y.duration)-s.index*S+(y.initialPosition===j.line?0:S/2)-(y.endPosition===j.middle?S/2:Math.min(S*.8,Math.max(S*.2,S*Math.random())));b.panStyle=`transition:transform ${y.duration}ms;transform:rotate(${_}deg)`,b.panStyleSlowly!==""&&setTimeout(()=>{b.panStyleSlowly=""},y.duration/2),y.useElementEvent?(f=C,g=s):setTimeout(()=>{C(s),m()},y.duration)});return{state:b,ZhuanpanStatus:P,ZhuanpanPosition:j,setOptions:u,play:r,reset:a,onPanEnd:()=>{y.useElementEvent&&f&&(f(g),f=null,g=null,m())}}},J=p=>{const y=k.ref(!0),S=window.requestAnimationFrame,b=window.cancelAnimationFrame;return{rafReadyStatus:y,raf:S,cancelRaf:b,onRafReady:u=>S(u)}},X=(p,...y)=>{console.warn("FanUse:",p,...y)},Q=p=>{const{initialValue:y,canvasSelector:S,mp:b,...d}=p||{},{raf:u,cancelRaf:o}=J(),t={duration:800,interval:20,minStep:1,decimal:0},n=k.ref(Number(y)||0),e=x=>{var _;Object.assign(t,{...x,decimal:typeof x.decimal<"u"?x.decimal:typeof x.minStep<"u"?((_=x.minStep.toString().split(".")[1])==null?void 0:_.length)||0:t.decimal})};e(d);let a=0,f=0,g=0,m=0,r=null;const i=()=>{r&&(o(r),r=null)},s=()=>{i(),r=u(()=>{r=null;const x=Date.now(),_=n.value,M=Math.ceil((x-a)/t.interval);let T=Number((f+m*M).toFixed(t.decimal));T=m<0?Math.max(g,T):Math.min(g,T),_!==T&&(n.value=T,p!=null&&p.onChange&&p.onChange(T)),n.value!==g?s():p!=null&&p.onFinish&&p.onFinish()})},C=x=>{const{value:_,...M}=x,T=Number(_);if(isNaN(T)){X("countTo..","请传入合法的value");return}T!==n.value&&(e(M),f=n.value,g=T,a=Date.now(),m=(g-n.value)/Math.ceil(t.duration/t.interval),m=m<0?Math.min(-Math.abs(t.minStep),m):Math.max(Math.abs(t.minStep),m),s())};return k.onUnmounted(()=>i()),{countValue:n,countTo:C}},tt=p=>{const{canvasSelector:y,mp:S,...b}=p||{},{raf:d,cancelRaf:u}=J(),o={time:0,millisecond:!1},t=x=>{Object.assign(o,x)};t(b);let n=b.time;const e=k.reactive({time:0,days:0,hours:0,minutes:0,seconds:0,milliseconds:0}),a=(x,_)=>{let M=!0;if(o.millisecond?M=x!==e.time:M=Math.floor(x/1e3)!==Math.floor(e.time/1e3),!M)return;const T=1e3,q=T*60,I=q*60,L=I*24;let O=Math.max(0,x);const W=Math.floor(O/L);O-=L*W;const U=Math.floor(O/I);O-=I*U;const $=Math.floor(O/q);O-=q*$;const N=Math.floor(O/T),G=O-T*N;Object.assign(e,{time:O,days:W,hours:U,minutes:$,seconds:N,milliseconds:G}),!_&&o.onChange&&o.onChange({...e})};a(o.time,!0);let f=0,g=null;const m=()=>{g&&(u(g),g=null)},r=()=>{if(m(),e.time<=0){f=0;return}g=d(()=>{g=null,a(o.time-(Date.now()-f)),e.time>0?r():o.onFinish&&o.onFinish()})},i=()=>{f||(f=Date.now(),r())},s=()=>{m(),o.time=e.time,f=0},C=x=>{s(),f=0,t({time:typeof(x==null?void 0:x.time)>"u"?n:x.time,...x}),n=o.time,a(o.time)};return k.onUnmounted(()=>m()),{current:e,start:i,pause:s,reset:C}};class D extends Error{status;customCode;config;constructor(y){const S=typeof y=="object"?y:{message:y};super(S.message),this.status=S.status,this.customCode=S.customCode,this.config=S.config}}var et=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},nt={exports:{}};/*!
 * clipboard.js v2.0.11
 * https://clipboardjs.com/
 *
 * Licensed MIT © Zeno Rocha
 */(function(p,y){(function(b,d){p.exports=d()})(et,function(){return function(){var S={686:function(u,o,t){t.d(o,{default:function(){return gt}});var n=t(279),e=t.n(n),a=t(370),f=t.n(a),g=t(817),m=t.n(g);function r(w){try{return document.execCommand(w)}catch{return!1}}var i=function(l){var c=m()(l);return r("cut"),c},s=i;function C(w){var l=document.documentElement.getAttribute("dir")==="rtl",c=document.createElement("textarea");c.style.fontSize="12pt",c.style.border="0",c.style.padding="0",c.style.margin="0",c.style.position="absolute",c.style[l?"right":"left"]="-9999px";var h=window.pageYOffset||document.documentElement.scrollTop;return c.style.top="".concat(h,"px"),c.setAttribute("readonly",""),c.value=w,c}var x=function(l,c){var h=C(l);c.container.appendChild(h);var v=m()(h);return r("copy"),h.remove(),v},_=function(l){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{container:document.body},h="";return typeof l=="string"?h=x(l,c):l instanceof HTMLInputElement&&!["text","search","url","tel","password"].includes(l==null?void 0:l.type)?h=x(l.value,c):(h=m()(l),r("copy")),h},M=_;function T(w){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?T=function(c){return typeof c}:T=function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},T(w)}var q=function(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},c=l.action,h=c===void 0?"copy":c,v=l.container,E=l.target,R=l.text;if(h!=="copy"&&h!=="cut")throw new Error('Invalid "action" value, use either "copy" or "cut"');if(E!==void 0)if(E&&T(E)==="object"&&E.nodeType===1){if(h==="copy"&&E.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if(h==="cut"&&(E.hasAttribute("readonly")||E.hasAttribute("disabled")))throw new Error(`Invalid "target" attribute. You can't cut text from elements with "readonly" or "disabled" attributes`)}else throw new Error('Invalid "target" value, use a valid Element');if(R)return M(R,{container:v});if(E)return h==="cut"?s(E):M(E,{container:v})},I=q;function L(w){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?L=function(c){return typeof c}:L=function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},L(w)}function O(w,l){if(!(w instanceof l))throw new TypeError("Cannot call a class as a function")}function W(w,l){for(var c=0;c<l.length;c++){var h=l[c];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(w,h.key,h)}}function U(w,l,c){return l&&W(w.prototype,l),c&&W(w,c),w}function $(w,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function");w.prototype=Object.create(l&&l.prototype,{constructor:{value:w,writable:!0,configurable:!0}}),l&&N(w,l)}function N(w,l){return N=Object.setPrototypeOf||function(h,v){return h.__proto__=v,h},N(w,l)}function G(w){var l=mt();return function(){var h=V(w),v;if(l){var E=V(this).constructor;v=Reflect.construct(h,arguments,E)}else v=h.apply(this,arguments);return dt(this,v)}}function dt(w,l){return l&&(L(l)==="object"||typeof l=="function")?l:yt(w)}function yt(w){if(w===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w}function mt(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function V(w){return V=Object.setPrototypeOf?Object.getPrototypeOf:function(c){return c.__proto__||Object.getPrototypeOf(c)},V(w)}function K(w,l){var c="data-clipboard-".concat(w);if(l.hasAttribute(c))return l.getAttribute(c)}var pt=function(w){$(c,w);var l=G(c);function c(h,v){var E;return O(this,c),E=l.call(this),E.resolveOptions(v),E.listenClick(h),E}return U(c,[{key:"resolveOptions",value:function(){var v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.action=typeof v.action=="function"?v.action:this.defaultAction,this.target=typeof v.target=="function"?v.target:this.defaultTarget,this.text=typeof v.text=="function"?v.text:this.defaultText,this.container=L(v.container)==="object"?v.container:document.body}},{key:"listenClick",value:function(v){var E=this;this.listener=f()(v,"click",function(R){return E.onClick(R)})}},{key:"onClick",value:function(v){var E=v.delegateTarget||v.currentTarget,R=this.action(E)||"copy",H=I({action:R,container:this.container,target:this.target(E),text:this.text(E)});this.emit(H?"success":"error",{action:R,text:H,trigger:E,clearSelection:function(){E&&E.focus(),window.getSelection().removeAllRanges()}})}},{key:"defaultAction",value:function(v){return K("action",v)}},{key:"defaultTarget",value:function(v){var E=K("target",v);if(E)return document.querySelector(E)}},{key:"defaultText",value:function(v){return K("text",v)}},{key:"destroy",value:function(){this.listener.destroy()}}],[{key:"copy",value:function(v){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{container:document.body};return M(v,E)}},{key:"cut",value:function(v){return s(v)}},{key:"isSupported",value:function(){var v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:["copy","cut"],E=typeof v=="string"?[v]:v,R=!!document.queryCommandSupported;return E.forEach(function(H){R=R&&!!document.queryCommandSupported(H)}),R}}]),c}(e()),gt=pt},828:function(u){var o=9;if(typeof Element<"u"&&!Element.prototype.matches){var t=Element.prototype;t.matches=t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector}function n(e,a){for(;e&&e.nodeType!==o;){if(typeof e.matches=="function"&&e.matches(a))return e;e=e.parentNode}}u.exports=n},438:function(u,o,t){var n=t(828);function e(g,m,r,i,s){var C=f.apply(this,arguments);return g.addEventListener(r,C,s),{destroy:function(){g.removeEventListener(r,C,s)}}}function a(g,m,r,i,s){return typeof g.addEventListener=="function"?e.apply(null,arguments):typeof r=="function"?e.bind(null,document).apply(null,arguments):(typeof g=="string"&&(g=document.querySelectorAll(g)),Array.prototype.map.call(g,function(C){return e(C,m,r,i,s)}))}function f(g,m,r,i){return function(s){s.delegateTarget=n(s.target,m),s.delegateTarget&&i.call(g,s)}}u.exports=a},879:function(u,o){o.node=function(t){return t!==void 0&&t instanceof HTMLElement&&t.nodeType===1},o.nodeList=function(t){var n=Object.prototype.toString.call(t);return t!==void 0&&(n==="[object NodeList]"||n==="[object HTMLCollection]")&&"length"in t&&(t.length===0||o.node(t[0]))},o.string=function(t){return typeof t=="string"||t instanceof String},o.fn=function(t){var n=Object.prototype.toString.call(t);return n==="[object Function]"}},370:function(u,o,t){var n=t(879),e=t(438);function a(r,i,s){if(!r&&!i&&!s)throw new Error("Missing required arguments");if(!n.string(i))throw new TypeError("Second argument must be a String");if(!n.fn(s))throw new TypeError("Third argument must be a Function");if(n.node(r))return f(r,i,s);if(n.nodeList(r))return g(r,i,s);if(n.string(r))return m(r,i,s);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}function f(r,i,s){return r.addEventListener(i,s),{destroy:function(){r.removeEventListener(i,s)}}}function g(r,i,s){return Array.prototype.forEach.call(r,function(C){C.addEventListener(i,s)}),{destroy:function(){Array.prototype.forEach.call(r,function(C){C.removeEventListener(i,s)})}}}function m(r,i,s){return e(document.body,r,i,s)}u.exports=a},817:function(u){function o(t){var n;if(t.nodeName==="SELECT")t.focus(),n=t.value;else if(t.nodeName==="INPUT"||t.nodeName==="TEXTAREA"){var e=t.hasAttribute("readonly");e||t.setAttribute("readonly",""),t.select(),t.setSelectionRange(0,t.value.length),e||t.removeAttribute("readonly"),n=t.value}else{t.hasAttribute("contenteditable")&&t.focus();var a=window.getSelection(),f=document.createRange();f.selectNodeContents(t),a.removeAllRanges(),a.addRange(f),n=a.toString()}return n}u.exports=o},279:function(u){function o(){}o.prototype={on:function(t,n,e){var a=this.e||(this.e={});return(a[t]||(a[t]=[])).push({fn:n,ctx:e}),this},once:function(t,n,e){var a=this;function f(){a.off(t,f),n.apply(e,arguments)}return f._=n,this.on(t,f,e)},emit:function(t){var n=[].slice.call(arguments,1),e=((this.e||(this.e={}))[t]||[]).slice(),a=0,f=e.length;for(a;a<f;a++)e[a].fn.apply(e[a].ctx,n);return this},off:function(t,n){var e=this.e||(this.e={}),a=e[t],f=[];if(a&&n)for(var g=0,m=a.length;g<m;g++)a[g].fn!==n&&a[g].fn._!==n&&f.push(a[g]);return f.length?e[t]=f:delete e[t],this}},u.exports=o,u.exports.TinyEmitter=o}},b={};function d(u){if(b[u])return b[u].exports;var o=b[u]={exports:{}};return S[u](o,o.exports,d),o.exports}return function(){d.n=function(u){var o=u&&u.__esModule?function(){return u.default}:function(){return u};return d.d(o,{a:o}),o}}(),function(){d.d=function(u,o){for(var t in o)d.o(o,t)&&!d.o(u,t)&&Object.defineProperty(u,t,{enumerable:!0,get:o[t]})}}(),function(){d.o=function(u,o){return Object.prototype.hasOwnProperty.call(u,o)}}(),d(686)}().default})})(nt);const F=typeof window<"u";function Z(p){return p instanceof Promise||typeof(p==null?void 0:p.then)=="function"}const ot=()=>{if(!F)return{};const p=navigator.userAgent,y=/macintosh|mac os x/i.test(p),S=/micromessenger/.test(p.toLowerCase());return{devicePixelRatio:window.devicePixelRatio,language:navigator.language,windowHeight:window.innerHeight,windowWidth:window.innerWidth,statusBarHeight:0,navBarHeight:0,isMac:y,isIos:/(iPhone|iPad|iPod|iOS)/i.test(p)||y,isWeixin:S,isAlipay:/alipay/.test(p.toLowerCase()),isMpWebWeixin:S&&p.includes("miniProgram")}},rt=(p,y)=>new Promise((S,b)=>{const d=document.createElement("script");if(y)for(let u in y)d.setAttribute(u,y[u]);d.src=p,d.onload=S,d.onerror=u=>{document.head.removeChild(d),b(u)},document.head.appendChild(d)}),it=()=>new Promise(()=>null),st=p=>{const{timeout:y,requestInterceptor:S,responseInterceptor:b,customCodeSet:d,errorInterceptor:u}=p||{},o=z.create({timeout:y||6e4,validateStatus:()=>!0}),t=n=>typeof u=="function"?Promise.reject(u(n)):Promise.reject(n);return o.interceptors.request.use(async n=>{let e={...n};if(typeof S=="function"){let f=S(e);Z(f)&&(f=await f),f&&typeof f=="object"&&(e={...e,...f})}const a=["get","delete"];return(!e.method||a.includes(e.method.toLowerCase())&&e.data&&!e.params)&&(e.params=e.data),e},n=>{const e=`${n.request?"网络异常，请检查是否有网后再试-":""}${n.message||""}`;return t(new D(e))}),o.interceptors.response.use(async n=>{const{config:e,data:a,status:f,headers:g}=n,{rejectErrorCode:m}=e;if(f>299){let i="";return d!=null&&d.messageKey&&a&&typeof a=="object"&&(i=a[d.messageKey]),i||(i=`${f>499?"服务忙":"内部错误"}，请稍候重试...`),t(new D({message:i,status:f,config:e}))}let r=a;if(typeof b=="function"){let i=b({data:a,status:f,config:e,headers:g});if(Z(i))try{i=await i}catch(s){return t(new D({message:s.message||"系统开小差了",status:f,config:e}))}typeof i<"u"&&(r=i)}if(!r||typeof r!="object")return r;if(m!==!1&&d){const i=a[d.key];let s=!0;if(Array.isArray(d.okValue)?s=d.okValue.includes(i):s=i===d.okValue,!s)return t(new D({message:a[d.messageKey],status:f,customCode:i,config:e}))}return r},n=>{var g;if(((g=n.request)==null?void 0:g.status)===0)return it();const{status:e,data:a}=n.response||{};let f;return a&&(d!=null&&d.messageKey)&&(f=a[d.messageKey]),t(new D({message:n.message,status:e,customCode:f,config:n.config}))}),{request:o}},at="fanWxJsSdk",ut="//res.wx.qq.com/open/js/jweixin-1.6.0.js",ct=p=>{const{configGetter:y,sdkLoadedUrl:S}=p||{};let b="";const{isWeixin:d,isIos:u}=ot(),o=new Map,t=(m,r)=>{const i=o.get(m)||[];i.push(r),o.set(m,i)},n=m=>{if(!F)return;const{fn:r,url:i}=m||{},s=i||window.location.href;if(!o.has(s))return;if(!r){o.delete(s);return}const C=o.get(s);if(!C)return;const x=C.findIndex(_=>_===r);x!==-1&&(C.splice(x,1),o.set(s,C))},e=m=>{const r=o.get(m);r&&(r.forEach(i=>i()),n({url:m}))},a=()=>new Promise((m,r)=>{window.wx.ready(()=>m(!0)),window.wx.error(i=>r(new Error(i.errMsg||i.message||JSON.stringify(i))))});return{configWeixinJs:async m=>{if(!F||!d)return;const r=(m==null?void 0:m.configGetter)||y;if(!r)throw new Error("[configGetter] required");const i=window.location.href;window.wx||await rt(ut,{id:at});const s=r({url:i}),{config:C,shareData:x}=Z(s)?await s:s;let _=!0;if(u&&b)try{await a(),_=!1}catch{}_&&(window.wx.config(C),await a()),b=i,x&&(window.wx.updateTimelineShareData(x),window.wx.updateAppMessageShareData(x)),e(i)},onConfigReady:async(m,r)=>{if(!F)return;const i=(r==null?void 0:r.url)||window.location.href;try{if(u)await a();else if(i!==b)throw new Error("Need wx.config");m()}catch{t(i,m)}},removeReadyCallback:n}},lt=p=>(window.fanWeixinSdk||(window.fanWeixinSdk=ct(p)),window.fanWeixinSdk),ft=()=>{let p;const y=(d,u,o)=>{let t=`${u.top||0}px ${u.right||0}px ${u.bottom||0}px ${u.right||0}px`;p=new IntersectionObserver(n=>{n.forEach(e=>{var a;e.isIntersecting&&u.callback&&u.callback({...(a=e.target)==null?void 0:a.dataset})})},{root:o,rootMargin:t}),d.forEach(n=>p.observe(n))};return{observer:async d=>{let u;d.root&&(u=document.querySelectorAll(d.root)[0]);const o=document.querySelectorAll(d.selector);o&&o.length&&y(o,d,u)},disconnect:()=>{p&&p.disconnect()}}};A.RequestError=D,A.ZhuanpanPosition=j,A.ZhuanpanStatus=P,A.useCountDown=tt,A.useCountTo=Q,A.useIntersectionObserver=ft,A.useRequest=st,A.useRequestAnimationFrame=J,A.useWeixinJsConfig=lt,A.useZhuanpan=B,Object.defineProperty(A,Symbol.toStringTag,{value:"Module"})});
